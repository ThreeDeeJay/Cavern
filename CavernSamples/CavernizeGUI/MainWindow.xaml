<Window x:Class="CavernizeGUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CavernizeGUI"
        mc:Ignorable="d"
        Title="Cavernize" Height="520" Width="900" Background="#696969">
    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Normal"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Normal"/>
        </Style>
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Normal"/>
        </Style>
        <Style TargetType="GridSplitter">
            <Setter Property="Background" Value="#AEAEAE"/>
        </Style>
        <Style TargetType="GroupBox">
            <Setter Property="Background" Value="#222222"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="18" />
            <Setter Property="FontWeight" Value="DemiBold"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style TargetType="RadioButton">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <Style TargetType="StatusBar">
            <Setter Property="Background" Value="#353535"/>
        </Style>
        <Style TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        <BitmapImage x:Key="Logo" UriSource="Resources\CavernLogo.png"/>
    </Window.Resources>
    <DockPanel>
        <StatusBar DockPanel.Dock="Bottom" Height="40" Padding="10,0,0,0">
            <ProgressBar x:Name="progress" Height="20" Width="250" Maximum="1"/>
            <TextBlock x:Name="status" FontSize="15" TextWrapping="Wrap"/>
        </StatusBar>
        <Grid>
            <Grid Margin="10,10,10,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="240" />
                    <ColumnDefinition Width="300" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <GroupBox Header="Step 1: System setup">
                    <Grid>
                        <TextBlock Margin="10,10,0,0" TextWrapping="Wrap" VerticalAlignment="Top" HorizontalAlignment="Left" Width="208"
                                   Text="Choose a layout, and place your speakers accordingly. Click the &quot;Display wiring&quot; button to see which output will change to which actual channel. For maximum audio quality, calibrate your system with QuickEQ."/>
                        <TextBlock HorizontalAlignment="Left" Margin="10,114,0,0" TextWrapping="Wrap" Text="Render target:" VerticalAlignment="Top"/>
                        <ComboBox x:Name="renderTarget" Template="{DynamicResource DarkComboBox}" ItemContainerStyle="{DynamicResource DarkComboBoxItem}"
                              Margin="90,111,10,0" VerticalAlignment="Top" SelectionChanged="OnRenderTargetSelected"/>
                        <Canvas Margin="0,140,0,0" Height="160" VerticalAlignment="Top" HorizontalAlignment="Center" Width="170">
                            <Rectangle Width="76" Height="50" Canvas.Left="46" Canvas.Top="00" Stroke="White"/>
                            <Ellipse x:Name="frontLeft"  Width="10" Height="10" Fill="Red" Canvas.Left="51" Canvas.Top="30"/>
                            <Ellipse x:Name="frontCenter"  Width="10" Height="10" Fill="Red" Canvas.Left="79" Canvas.Top="30"/>
                            <Ellipse x:Name="frontRight"  Width="10" Height="10" Fill="Red" Canvas.Left="107" Canvas.Top="30"/>
                            <Ellipse x:Name="topFrontLeft"  Width="10" Height="10" Fill="Red" Canvas.Left="51" Canvas.Top="5"/>
                            <Ellipse x:Name="topFrontCenter"  Width="10" Height="10" Fill="Red" Canvas.Left="79" Canvas.Top="5"/>
                            <Ellipse x:Name="topFrontRight"  Width="10" Height="10" Fill="Red" Canvas.Left="107" Canvas.Top="5"/>
                            <Line X1="46" Y1="0" X2="14" Y2="73" Stroke="Gray"/>
                            <Line X1="122" Y1="0" X2="154" Y2="73" Stroke="Gray"/>
                            <Line X1="46" Y1="50" X2="14" Y2="158" Stroke="Gray"/>
                            <Line X1="122" Y1="50" X2="154" Y2="158" Stroke="Gray"/>
                            <Ellipse x:Name="wideLeft"  Width="6" Height="10" Fill="Red" Canvas.Left="36" Canvas.Top="40"/>
                            <Ellipse x:Name="wideRight"  Width="6" Height="10" Fill="Red" Canvas.Left="126" Canvas.Top="40"/>
                            <Ellipse x:Name="sideLeft"  Width="6" Height="10" Fill="Red" Canvas.Left="20" Canvas.Top="91"/>
                            <Ellipse x:Name="sideRight"  Width="6" Height="10" Fill="Red" Canvas.Left="142" Canvas.Top="91"/>
                            <Ellipse x:Name="topSideLeft"  Width="10" Height="6" Fill="Red" Canvas.Left="46" Canvas.Top="62"/>
                            <Ellipse x:Name="godsVoice"  Width="10" Height="6" Fill="Red" Canvas.Left="79" Canvas.Top="57"/>
                            <Ellipse x:Name="topSideRight"  Width="10" Height="6" Fill="Red" Canvas.Left="112" Canvas.Top="62"/>
                            <Rectangle Width="140" Height="85" Canvas.Left="14" Canvas.Top="73" Stroke="Gray"/>
                            <Ellipse x:Name="rearLeft"  Width="10" Height="10" Fill="Red" Canvas.Left="34" Canvas.Top="118"/>
                            <Ellipse x:Name="rearRight"  Width="10" Height="10" Fill="Red" Canvas.Left="124" Canvas.Top="118"/>
                        </Canvas>
                        <Button Content="Display wiring" HorizontalAlignment="Left" Margin="10,305,0,0" VerticalAlignment="Top" Width="100" Click="DisplayWiring"/>
                        <CheckBox x:Name="dynamicOnly" Content="Mute bed" HorizontalAlignment="Left" Margin="10,330,0,0" VerticalAlignment="Top"
                                  ToolTip="Only render objects that are not fixed in position, but move around."/>
                        <CheckBox x:Name="heightOnly" Content="Mute ground" Margin="0,330,24,0" VerticalAlignment="Top"
                                  ToolTip="Any sound that only comes from the ground speakers will be muted." HorizontalAlignment="Right"/>

                        <TextBlock HorizontalAlignment="Left" Margin="10,350,0,0" TextWrapping="Wrap" Text="Rendering mode:" Height="16" VerticalAlignment="Top"/>
                        <RadioButton x:Name="renderToFile" Content="Export" HorizontalAlignment="Left" Margin="10,371,0,0" IsChecked="True" Height="15" VerticalAlignment="Top"
                                     ToolTip="Render the result to a file for later playback."/>
                        <RadioButton x:Name="renderOnly" Content="Report" Margin="0,371,60,0" Height="15" VerticalAlignment="Top"
                                     ToolTip="To only check if a content is truly object-based or not, choose this option. This option won't write anything to the disk." HorizontalAlignment="Right"/>
                    </Grid>
                </GroupBox>
                <Grid Grid.Column="1" Margin="10,0,0,0">
                    <GroupBox Header="Step 2: FFmpeg" Height="171" VerticalAlignment="Top">
                        <Grid>
                            <TextBlock Margin="10,10,0,0" TextWrapping="Wrap" VerticalAlignment="Top" HorizontalAlignment="Left" Width="262"
                                Text="Locate FFmpeg with this button. Download it and select the folder which contains ffmpeg.exe. Cavernize will use FFmpeg for decoding and re-encoding. This temporary workaround uses a lot of space, because of which, 20 GB of free space is recommended for a 2-hour movie."/>
                            <Button Content="Locate FFmpeg" HorizontalAlignment="Center" Width="120" Height="20" VerticalAlignment="Top" Click="LocateFFmpeg" Margin="0,111,0,0"/>
                        </Grid>
                    </GroupBox>
                    <GroupBox Header="Step 3: Content processing" Margin="0,176,0,0">
                        <Grid>
                            <Button Content="Open content" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Width="100" Click="OpenFile"/>
                            <TextBlock x:Name="fileName" Margin="115,12,10,0" TextWrapping="NoWrap" VerticalAlignment="Top"/>
                            <ComboBox x:Name="tracks" Template="{DynamicResource DarkComboBox}" ItemContainerStyle="{DynamicResource DarkComboBoxItem}"
                                  Margin="10,35,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" SelectionChanged="OnTrackSelected" Visibility="Hidden"/>
                            <TextBlock x:Name="trackInfo" Margin="10,62,10,0" TextWrapping="Wrap" VerticalAlignment="Top"/>
                            <Button x:Name="render" Content="Render" Margin="0,0,10,10" HorizontalAlignment="Right" Width="70" Click="Render"
                                    Background="Green" Foreground="White" VerticalAlignment="Bottom"/>
                        </Grid>
                    </GroupBox>
                </Grid>
                <Grid Grid.Column="2" Margin="10,0,0,0">
                    <Image Source="{StaticResource Logo}" MouseDown="Ad" HorizontalAlignment="Right" VerticalAlignment="Top" Width="169"/>
                    <TextBlock Text="by VoidX (cavern.sbence.hu)" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,27,0,0"/>
                    <GroupBox Header="Post-render report" Margin="0,43,0,0">
                        <Grid>
                            <TextBlock x:Name="report" Margin="10,10,10,0" Text="After rendering has finished, more track information will appear here, like true object usage statistics." TextWrapping="Wrap" VerticalAlignment="Top"/>
                        </Grid>
                    </GroupBox>
                </Grid>
            </Grid>
        </Grid>
    </DockPanel>
</Window>
